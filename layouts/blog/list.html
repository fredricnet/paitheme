{{ define "main" }}
<!-- Blog Hero Section -->
<section class="blog-hero-section">
    <div class="container">
        <div class="blog-hero-content">
            <h1 class="hero-title">{{ .Title }}</h1>
            {{- if .Description -}}
            <p class="hero-description">{{ .Description }}</p>
            {{- end -}}
        </div>
    </div>
</section>

<!-- Blog Posts Section -->
<section class="blog-posts-section">
    <div class="container">
        <div class="blog-posts-grid">
            {{- if .Content -}}
            {{ .Content }}
            {{- else -}}
            <!-- Fallback: If no content, show cards from page list -->
            {{- $sortedPages := sort .Pages "Params.index" "asc" -}}
            {{- $featured := first 1 (where $sortedPages "Params.featured" true) -}}
            {{- $regular := where $sortedPages "Params.featured" "!=" true -}}
            
            {{- if $featured -}}
                {{- range $featured -}}
                <article class="blog-card blog-card-featured">
                    <div class="blog-card-image">
                        {{- if .Params.image -}}
                        <img src="{{ .Params.image }}" alt="{{ .Title }}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
                        <div class="blog-card-image-placeholder" style="display: none;">
                            <p>{{ .Title }}</p>
                        </div>
                        {{- else -}}
                        <div class="blog-card-image-placeholder">
                            <p>{{ .Title }}</p>
                        </div>
                        {{- end -}}
                    </div>
                    <div class="blog-card-content">
                        <div class="blog-card-badge">{{ .Params.category | default "Featured Insight" }}</div>
                        <h2 class="blog-card-title"><a href="{{ .Permalink }}">{{ .Title }}</a></h2>
                        <p class="blog-card-description">{{ .Description }}</p>
                        <a href="{{ .Permalink }}" class="blog-card-link">Read more<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="blog-card-link-icon"><path d="m9 18 6-6-6-6"></path></svg></a>
                    </div>
                </article>
                {{- end -}}
            {{- end -}}
            
            {{- range $regular -}}
            <article class="blog-card">
                <div class="blog-card-image">
                    {{- if .Params.image -}}
                    <img src="{{ .Params.image }}" alt="{{ .Title }}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
                    <div class="blog-card-image-placeholder" style="display: none;">
                        <p>{{ .Title }}</p>
                    </div>
                    {{- else -}}
                    <div class="blog-card-image-placeholder">
                        <p>{{ .Title }}</p>
                    </div>
                    {{- end -}}
                </div>
                <div class="blog-card-content">
                    <div class="blog-card-badge">{{ .Params.category | default "Blog" }}</div>
                    <h3 class="blog-card-title"><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
                    <p class="blog-card-description">{{ .Description }}</p>
                    <a href="{{ .Permalink }}" class="blog-card-link">Read more<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="blog-card-link-icon"><path d="m9 18 6-6-6-6"></path></svg></a>
                </div>
            </article>
            {{- end -}}
            {{- end -}}
        </div>
    </div>
</section>
{{ end }}

