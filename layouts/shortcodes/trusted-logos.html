{{/* Trusted Logos Shortcode - Reusable logos section template
  Parameters:
  - label: Section label text (optional, default: "Powering the world's best.")
  - logos: Comma-separated list of logo names (optional, uses default set if not provided)
  - speed: Animation speed in seconds (optional, default: "30")
  - tag-text: Text for the tag badge (optional, e.g., "real results")
  - tag-icon: Icon type for tag badge (optional, default: "star")
  - tag-icon-count: Number of icons in tag badge (optional, default: 5)
  - tag-icon-color: Color of tag icons (optional, default: "#3b82f6")
  - published: Whether to render this section (optional, default: "true")
*/}}
{{- $published := .Get "published" | default "true" -}}
{{- if ne $published "false" -}}
{{- $label := .Get "label" | default "Powering the world's best." -}}
{{- $logosParam := .Get "logos" -}}
{{- $speed := .Get "speed" | default "30" -}}
{{- $tagText := .Get "tag-text" -}}
{{- $tagIcon := .Get "tag-icon" | default "star" -}}
{{- $tagIconCount := .Get "tag-icon-count" | default 5 -}}
{{- $tagIconColor := .Get "tag-icon-color" | default "#3b82f6" -}}

{{- $defaultLogos := slice "mercury" "watershed" "retool" "descript" "perplexity" "monzo" "ramp" "raycast" "arc" -}}
{{- $logos := $defaultLogos -}}
{{- if $logosParam -}}
    {{- $logosList := split $logosParam "," -}}
    {{- $logos = slice -}}
    {{- range $logosList -}}
        {{- $trimmed := trim . " " | lower -}}
        {{- if $trimmed -}}
            {{- $logos = $logos | append $trimmed -}}
        {{- end -}}
    {{- end -}}
{{- end -}}

<!-- Trusted By Section -->
<section class="trusted-section">
    <div class="container">
        {{- if $tagText -}}
        {{- $firstChar := substr $tagText 0 1 | upper -}}
        {{- $rest := substr $tagText 1 -}}
        {{- $capitalizedText := printf "%s%s" $firstChar $rest -}}
        <div class="testimonials-stars-wrapper" style="margin-bottom: 1.5rem;">
            <div class="border-animation">
                <div class="border-animation-inner testimonials-stars">
                    {{- range seq $tagIconCount -}}
                    {{- if eq $tagIcon "star" -}}
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="{{ $tagIconColor }}" stroke="{{ $tagIconColor }}" stroke-width="2">
                        <path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path>
                    </svg>
                    {{- end -}}
                    {{- end -}}
                    <span class="testimonials-label">{{ $capitalizedText }}</span>
                </div>
            </div>
        </div>
        {{- end -}}
        <p class="trusted-label">{{ $label }}</p>
        <div class="trusted-logos-wrapper">
            <div class="trusted-logos trusted-logos-scroll" style="animation-duration: {{ $speed }}s;">
                {{- range $logos -}}
                    {{- $logoPath := printf "/images/logos/%s.svg" . -}}
                    {{- $logoAlt := . | title -}}
                    <img src="{{ $logoPath }}" alt="{{ $logoAlt }}" class="logo-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline';" />
                    <span style="display: none;">{{ $logoAlt }}</span>
                {{- end -}}
                <!-- Duplicate logos for seamless loop -->
                {{- range $logos -}}
                    {{- $logoPath := printf "/images/logos/%s.svg" . -}}
                    {{- $logoAlt := . | title -}}
                    <img src="{{ $logoPath }}" alt="{{ $logoAlt }}" class="logo-img" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline';" />
                    <span style="display: none;">{{ $logoAlt }}</span>
                {{- end -}}
            </div>
        </div>
    </div>
</section>
{{- end -}}
